import{d as h,P as D,h as I,j as C,a4 as R,c as F,a as l,w as a,u as e,N as L,l as N,o as M,b as r,p as i,m as g,S as P,e as A,y as p,v as c,s as q,B as _,a5 as w,L as G,t as d,r as V,k as m,O as j,a6 as z,G as E,M as v,n as f,D as H,C as Z,Z as J,A as K,a7 as Q}from"./index-DC4ENTic.js";import{M as W,C as X,a as Y}from"./MailOutline-BUh11Ytt.js";import{B as ee}from"./BusinessOutline-BwKmqMQP.js";import{T as le}from"./TimeOutline-COE-oNgJ.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";const te={class:"profile-page"},ue={class:"flex gap-3 mt-6"},re={class:"flex flex-col items-center text-center"},se=h({__name:"Profile",setup(ne){Q();const u=D(),k=I(null),s=C({name:"",email:"",phone:"",department:"",role:"worker"}),b=C({todayActions:15,weekActions:89,totalActions:1247}),O=[{label:"Администратор",value:"admin"},{label:"Менеджер",value:"manager"},{label:"Сотрудник",value:"worker"}],$={name:[{required:!0,message:"Введите ФИО",trigger:"blur"},{min:2,message:"Имя должно быть не менее 2 символов",trigger:"blur"}],email:[{required:!0,message:"Введите email",trigger:"blur"},{type:"email",message:"Некорректный email",trigger:"blur"}],phone:[{required:!0,message:"Введите телефон",trigger:"blur"}]},T=n=>{switch(n){case"admin":return"error";case"manager":return"warning";case"worker":return"info";default:return"default"}},S=n=>{switch(n){case"admin":return"Администратор";case"manager":return"Менеджер";case"worker":return"Сотрудник";default:return"Пользователь"}},x=n=>n?new Intl.DateTimeFormat("ru-RU").format(n):"",B=()=>{k.value?.validate(n=>{n?window.$message&&window.$message.error("Пожалуйста, исправьте ошибки в форме"):(u.updateProfile(s),window.$message&&window.$message.success("Профиль успешно обновлен"))})},y=()=>{u.user&&Object.assign(s,{name:u.user.name,email:u.user.email,phone:u.user.phone,department:u.user.department,role:u.user.role})};return R(()=>{y()}),(n,t)=>{const U=V("n-h3");return M(),F("div",te,[l(e(L),null,{default:a(()=>[...t[8]||(t[8]=[r("Личный кабинет",-1)])]),_:1}),l(e(N),{cols:12,"x-gap":16,"y-gap":16},{default:a(()=>[l(e(i),{span:8},{default:a(()=>[l(e(g),{title:"Основная информация"},{default:a(()=>[l(e(P),{model:s,rules:$,ref_key:"formRef",ref:k},{default:a(()=>[l(e(N),{cols:2,"x-gap":12},{default:a(()=>[l(e(i),null,{default:a(()=>[l(e(p),{label:"ФИО",path:"name"},{default:a(()=>[l(e(c),{value:s.name,"onUpdate:value":t[0]||(t[0]=o=>s.name=o),placeholder:"Введите ваше имя"},null,8,["value"])]),_:1})]),_:1}),l(e(i),null,{default:a(()=>[l(e(p),{label:"Email",path:"email"},{default:a(()=>[l(e(c),{value:s.email,"onUpdate:value":t[1]||(t[1]=o=>s.email=o),placeholder:"Введите email"},null,8,["value"])]),_:1})]),_:1}),l(e(i),null,{default:a(()=>[l(e(p),{label:"Телефон",path:"phone"},{default:a(()=>[l(e(c),{value:s.phone,"onUpdate:value":t[2]||(t[2]=o=>s.phone=o),placeholder:"+7 (999) 999-99-99"},null,8,["value"])]),_:1})]),_:1}),l(e(i),null,{default:a(()=>[l(e(p),{label:"Отдел",path:"department"},{default:a(()=>[l(e(c),{value:s.department,"onUpdate:value":t[3]||(t[3]=o=>s.department=o),placeholder:"Отдел"},null,8,["value"])]),_:1})]),_:1}),l(e(i),null,{default:a(()=>[l(e(p),{label:"Должность",path:"role"},{default:a(()=>[l(e(q),{value:s.role,"onUpdate:value":t[4]||(t[4]=o=>s.role=o),options:O,placeholder:"Выберите должность"},null,8,["value"])]),_:1})]),_:1})]),_:1}),A("div",ue,[l(e(_),{type:"primary",onClick:B},{default:a(()=>[...t[9]||(t[9]=[r("Сохранить изменения",-1)])]),_:1}),l(e(_),{onClick:y},{default:a(()=>[...t[10]||(t[10]=[r("Отмена",-1)])]),_:1})])]),_:1},8,["model"])]),_:1}),l(e(g),{title:"Статистика активности",class:"mt-4"},{default:a(()=>[l(e(N),{cols:3,"y-gap":8},{default:a(()=>[l(e(i),null,{default:a(()=>[l(e(w),{label:"За сегодня",value:b.todayActions},null,8,["value"])]),_:1}),l(e(i),null,{default:a(()=>[l(e(w),{label:"За неделю",value:b.weekActions},null,8,["value"])]),_:1}),l(e(i),null,{default:a(()=>[l(e(w),{label:"Всего действий",value:b.totalActions},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),l(e(i),{span:4},{default:a(()=>[l(e(g),null,{default:a(()=>[A("div",re,[l(e(G),{round:"",size:80,src:e(u).user?.avatar,class:"mb-4"},{default:a(()=>[r(d(e(u).user?.name?.charAt(0)),1)]),_:1},8,["src"]),l(U,{class:"m-0"},{default:a(()=>[r(d(e(u).user?.name),1)]),_:1}),l(e(m),{depth:"3",class:"mb-2"},{default:a(()=>[r(d(e(u).user?.role),1)]),_:1}),l(e(j),{type:T(e(u).user?.role),size:"small"},{default:a(()=>[r(d(S(e(u).user?.role)),1)]),_:1},8,["type"])]),l(e(z)),l(e(E),null,{default:a(()=>[l(e(v),null,{prefix:a(()=>[l(e(f),null,{default:a(()=>[l(e(W))]),_:1})]),default:a(()=>[l(e(m),null,{default:a(()=>[r(d(e(u).user?.email),1)]),_:1})]),_:1}),l(e(v),null,{prefix:a(()=>[l(e(f),null,{default:a(()=>[l(e(X))]),_:1})]),default:a(()=>[l(e(m),null,{default:a(()=>[r(d(e(u).user?.phone),1)]),_:1})]),_:1}),l(e(v),null,{prefix:a(()=>[l(e(f),null,{default:a(()=>[l(e(ee))]),_:1})]),default:a(()=>[l(e(m),null,{default:a(()=>[r(d(e(u).user?.department),1)]),_:1})]),_:1}),l(e(v),null,{prefix:a(()=>[l(e(f),null,{default:a(()=>[l(e(Y))]),_:1})]),default:a(()=>[l(e(m),null,{default:a(()=>[r("В системе с "+d(x(e(u).user?.createdAt)),1)]),_:1})]),_:1}),l(e(v),null,{prefix:a(()=>[l(e(f),null,{default:a(()=>[l(e(le))]),_:1})]),default:a(()=>[l(e(m),null,{default:a(()=>[r("Последний вход: "+d(x(e(u).user?.lastLogin)),1)]),_:1})]),_:1})]),_:1})]),_:1}),l(e(g),{title:"Быстрые действия",class:"mt-4"},{default:a(()=>[l(e(H),{vertical:""},{default:a(()=>[l(e(_),{block:"",onClick:t[5]||(t[5]=o=>n.$router.push("/inventory"))},{icon:a(()=>[l(e(f),null,{default:a(()=>[l(e(Z))]),_:1})]),default:a(()=>[t[11]||(t[11]=r(" Управление складом ",-1))]),_:1}),l(e(_),{block:"",onClick:t[6]||(t[6]=o=>n.$router.push("/orders"))},{icon:a(()=>[l(e(f),null,{default:a(()=>[l(e(J))]),_:1})]),default:a(()=>[t[12]||(t[12]=r(" Просмотр заказов ",-1))]),_:1}),l(e(_),{block:"",onClick:t[7]||(t[7]=o=>n.$router.push("/reports"))},{icon:a(()=>[l(e(f),null,{default:a(()=>[l(e(K))]),_:1})]),default:a(()=>[t[13]||(t[13]=r(" Создать отчет ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}}),pe=ae(se,[["__scopeId","data-v-5055f19c"]]);export{pe as default};
