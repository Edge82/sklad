import{d as V,c as L,o as k,e as m,g as ve,h as z,i as I,j as ne,J as U,w as l,a as t,u as e,l as Z,p as D,q as Y,b as u,y as _,v as B,Q as le,s as H,z as ye,a0 as ge,B as $,S as we,L as oe,t as g,T as be,O as A,R as Q,m as E,G as X,M,k as h,n as y,a1 as ke,H as ee,I as te,D as he,Z as De,a2 as xe,N as Ce,Y as ae,r as _e,a3 as Ee,E as $e,F as p,K as Oe,U as Te,_ as Ne,$ as W}from"./index-DC4ENTic.js";import{M as se,C as ie,a as Le}from"./MailOutline-BUh11Ytt.js";import{L as Me,D as Se}from"./LocationOutline-BvyZIppR.js";import{B as re}from"./BusinessOutline-BwKmqMQP.js";import{C as ue,P as de,S as Ue,E as ze,T as qe}from"./TrashOutline-BEbQvfq4.js";import{T as Be}from"./TimeOutline-COE-oNgJ.js";import{_ as me}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as Ie}from"./CheckmarkCircleOutline-B_HM8-Ck.js";const Re={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},je=V({name:"ChatbubbleOutline",render:function(f,w){return k(),L("svg",Re,w[0]||(w[0]=[m("path",{d:"M87.49 380c1.19-4.38-1.44-10.47-3.95-14.86a44.86 44.86 0 0 0-2.54-3.8a199.81 199.81 0 0 1-33-110C47.65 139.09 140.73 48 255.83 48C356.21 48 440 117.54 459.58 209.85a199 199 0 0 1 4.42 41.64c0 112.41-89.49 204.93-204.59 204.93c-18.3 0-43-4.6-56.47-8.37s-26.92-8.77-30.39-10.11a31.09 31.09 0 0 0-11.12-2.07a30.71 30.71 0 0 0-12.09 2.43l-67.83 24.48a16 16 0 0 1-4.67 1.22a9.6 9.6 0 0 1-9.57-9.74a15.85 15.85 0 0 1 .6-3.29z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1)]))}}),Fe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Pe=V({name:"ChevronForwardOutline",render:function(f,w){return k(),L("svg",Fe,w[0]||(w[0]=[m("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M184 112l144 144l-144 144"},null,-1)]))}}),Ae={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},He=V({name:"PersonAddOutline",render:function(f,w){return k(),L("svg",Ae,w[0]||(w[0]=[m("path",{d:"M376 144c-3.92 52.87-44 96-88 96s-84.15-43.12-88-96c-4-55 35-96 88-96s92 42 88 96z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),m("path",{d:"M288 304c-87 0-175.3 48-191.64 138.6c-2 10.92 4.21 21.4 15.65 21.4H464c11.44 0 17.62-10.48 15.65-21.4C463.3 352 375 304 288 304z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),m("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M88 176v112"},null,-1),m("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M144 232H32"},null,-1)]))}}),Ve=ve("employees",()=>{const s=z([{id:1,name:"Иван Петров",email:"ivan.petrov@furniture.com",phone:"+7 (999) 123-45-67",position:"Менеджер по производству",department:"Производство",role:"manager",status:"active",salary:85e3,hireDate:new Date("2021-03-15"),birthDate:new Date("1985-07-22"),address:"г. Москва, ул. Производственная, д. 15",skills:["Управление","Планирование","Контроль качества"],lastLogin:new Date("2024-01-22T09:30:00"),notes:"Ответственный сотрудник"},{id:2,name:"Мария Сидорова",email:"maria.sidorova@furniture.com",phone:"+7 (999) 987-65-43",position:"Старший кладовщик",department:"Склад",role:"warehouse",status:"active",salary:65e3,hireDate:new Date("2022-05-10"),birthDate:new Date("1990-11-05"),skills:["Учет","Инвентаризация","ERP системы"],lastLogin:new Date("2024-01-22T08:45:00")},{id:3,name:"Алексей Волков",email:"aleksey.volkov@furniture.com",phone:"+7 (999) 555-44-33",position:"Мастер столярного цеха",department:"Производство",role:"worker",status:"active",salary:75e3,hireDate:new Date("2020-08-22"),birthDate:new Date("1988-03-14"),skills:["Столярные работы","Черчение","Работа с деревом"],lastLogin:new Date("2024-01-21T17:20:00")},{id:4,name:"Ольга Козлова",email:"olga.kozlova@furniture.com",phone:"+7 (999) 777-88-99",position:"Бухгалтер",department:"Финансы",role:"admin",status:"active",salary:7e4,hireDate:new Date("2021-11-30"),birthDate:new Date("1992-09-18"),skills:["Бухгалтерия","Налоги","1С"],lastLogin:new Date("2024-01-22T10:15:00")},{id:5,name:"Сергей Николаев",email:"sergey.nikolaev@furniture.com",phone:"+7 (999) 222-33-44",position:"Сборщик мебели",department:"Производство",role:"worker",status:"vacation",salary:55e3,hireDate:new Date("2023-02-14"),birthDate:new Date("1995-12-08"),skills:["Сборка мебели","Чтение чертежей"],lastLogin:new Date("2024-01-15T16:40:00"),notes:"В отпуске до 01.02.2024"},{id:6,name:"Екатерина Морозова",email:"ekaterina.morozova@furniture.com",phone:"+7 (999) 666-55-44",position:"Менеджер по продажам",department:"Продажи",role:"manager",status:"active",salary:8e4,hireDate:new Date("2022-07-01"),birthDate:new Date("1993-04-25"),skills:["Продажи","Переговоры","CRM"],lastLogin:new Date("2024-01-22T11:05:00")},{id:7,name:"Дмитрий Семенов",email:"dmitry.semenov@furniture.com",phone:"+7 (999) 333-22-11",position:"Водитель-экспедитор",department:"Логистика",role:"worker",status:"active",salary:6e4,hireDate:new Date("2023-04-10"),birthDate:new Date("1987-08-30"),skills:["Вождение","Логистика","Погрузка"],lastLogin:new Date("2024-01-22T07:20:00")},{id:8,name:"Анна Васнецова",email:"anna.vasnetsova@furniture.com",phone:"+7 (999) 444-55-66",position:"Дизайнер",department:"Дизайн",role:"worker",status:"sick",salary:7e4,hireDate:new Date("2021-09-05"),birthDate:new Date("1991-06-12"),skills:["3D моделирование","Дизайн","AutoCAD"],lastLogin:new Date("2024-01-18T14:30:00"),notes:"На больничном"}]),f=z([{id:1,name:"Производство",employeeCount:3,budget:5e6,location:"Цех №1"},{id:2,name:"Склад",employeeCount:1,budget:15e5,location:"Складской комплекс"},{id:3,name:"Продажи",employeeCount:1,budget:3e6,location:"Офис, 3 этаж"},{id:4,name:"Финансы",employeeCount:1,budget:1e6,location:"Офис, 2 этаж"},{id:5,name:"Логистика",employeeCount:1,budget:2e6,location:"Гараж"},{id:6,name:"Дизайн",employeeCount:1,budget:18e5,location:"Офис, 4 этаж"}]),w=I(()=>s.value.length),N=I(()=>s.value.filter(d=>d.status==="active").length),O=I(()=>s.value.reduce((d,c)=>d+c.salary,0)),r=I(()=>{const d={};return s.value.forEach(c=>{d[c.department]||(d[c.department]={count:0,totalSalary:0}),d[c.department].count++,d[c.department].totalSalary+=c.salary}),d});return{employees:s,departments:f,totalEmployees:w,activeEmployees:N,totalSalary:O,departmentStats:r,getEmployeeById:d=>s.value.find(c=>c.id===d),getEmployeesByDepartment:d=>s.value.filter(c=>c.department===d),addEmployee:d=>{const c={...d,id:s.value.length+1};s.value.push(c);const C=f.value.find(T=>T.name===d.department);return C&&C.employeeCount++,c},updateEmployee:(d,c)=>{const C=s.value.findIndex(T=>T.id===d);if(C!==-1){const T=s.value[C].department,q=c.department;if(s.value[C]={...s.value[C],...c},q&&T!==q){const J=f.value.find(G=>G.name===T),K=f.value.find(G=>G.name===q);J&&J.employeeCount--,K&&K.employeeCount++}}},deleteEmployee:d=>{const c=s.value.findIndex(C=>C.id===d);if(c!==-1){const C=s.value[c],T=f.value.find(q=>q.name===C.department);T&&T.employeeCount--,s.value.splice(c,1)}},getRoleLabel:d=>({admin:"Администратор",manager:"Менеджер",worker:"Рабочий",warehouse:"Кладовщик",production:"Производство"})[d]||d,getStatusLabel:d=>({active:"Активен",inactive:"Неактивен",vacation:"Отпуск",sick:"Больничный"})[d]||d,getStatusColor:d=>({active:"success",inactive:"default",vacation:"warning",sick:"error"})[d]||"default"}}),Ge={class:"flex justify-end gap-3 mt-6"},Qe=V({__name:"EmployeeForm",emits:["submit","cancel"],setup(s,{emit:f}){const w=f,N=z(null),O=z(!1),r=ne({name:"",email:"",phone:"",position:"",department:"",role:"worker",status:"active",salary:5e4,hireDate:new Date().getTime(),birthDate:null,address:"",skills:[],notes:""}),b=[{label:"Производство",value:"Производство"},{label:"Склад",value:"Склад"},{label:"Продажи",value:"Продажи"},{label:"Финансы",value:"Финансы"},{label:"Логистика",value:"Логистика"},{label:"Дизайн",value:"Дизайн"}],R=[{label:"Администратор",value:"admin"},{label:"Менеджер",value:"manager"},{label:"Рабочий",value:"worker"},{label:"Кладовщик",value:"warehouse"},{label:"Производство",value:"production"}],j=[{label:"Активен",value:"active"},{label:"Неактивен",value:"inactive"},{label:"Отпуск",value:"vacation"},{label:"Больничный",value:"sick"}],F={name:[{required:!0,message:"Введите ФИО",trigger:"blur"},{min:2,message:"ФИО должно быть не менее 2 символов",trigger:"blur"}],email:[{required:!0,message:"Введите email",trigger:"blur"},{type:"email",message:"Некорректный email",trigger:"blur"}],phone:[{required:!0,message:"Введите телефон",trigger:"blur"}],position:[{required:!0,message:"Введите должность",trigger:"blur"}],department:[{required:!0,message:"Выберите отдел",trigger:"change"}],salary:[{required:!0,type:"number",min:0,message:"Зарплата должна быть положительной",trigger:"blur"}],hireDate:[{required:!0,message:"Выберите дату приема",trigger:"change"}]},P=()=>{N.value?.validate(S=>{if(S)window.$message?.error("Пожалуйста, исправьте ошибки в форме");else{O.value=!0;const a={...r,hireDate:r.hireDate?new Date(r.hireDate):new Date,birthDate:r.birthDate?new Date(r.birthDate):void 0};setTimeout(()=>{w("submit",a),O.value=!1},1e3)}})};return(S,a)=>(k(),U(e(we),{ref_key:"formRef",ref:N,model:r,rules:F,"label-placement":"top"},{default:l(()=>[t(e(Z),{cols:2,"x-gap":24},{default:l(()=>[t(e(D),null,{default:l(()=>[t(e(Y),null,{default:l(()=>[...a[14]||(a[14]=[u("Основная информация",-1)])]),_:1}),t(e(_),{label:"ФИО",path:"name",required:""},{default:l(()=>[t(e(B),{value:r.name,"onUpdate:value":a[0]||(a[0]=i=>r.name=i),placeholder:"Введите ФИО сотрудника"},null,8,["value"])]),_:1}),t(e(_),{label:"Email",path:"email",required:""},{default:l(()=>[t(e(B),{value:r.email,"onUpdate:value":a[1]||(a[1]=i=>r.email=i),placeholder:"email@company.com",type:"email"},null,8,["value"])]),_:1}),t(e(_),{label:"Телефон",path:"phone",required:""},{default:l(()=>[t(e(B),{value:r.phone,"onUpdate:value":a[2]||(a[2]=i=>r.phone=i),placeholder:"+7 (999) 999-99-99"},null,8,["value"])]),_:1}),t(e(_),{label:"Дата рождения",path:"birthDate"},{default:l(()=>[t(e(le),{value:r.birthDate,"onUpdate:value":a[3]||(a[3]=i=>r.birthDate=i),type:"date",placeholder:"Выберите дату",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(e(D),null,{default:l(()=>[t(e(Y),null,{default:l(()=>[...a[15]||(a[15]=[u("Рабочая информация",-1)])]),_:1}),t(e(_),{label:"Должность",path:"position",required:""},{default:l(()=>[t(e(B),{value:r.position,"onUpdate:value":a[4]||(a[4]=i=>r.position=i),placeholder:"Например, Менеджер"},null,8,["value"])]),_:1}),t(e(_),{label:"Отдел",path:"department",required:""},{default:l(()=>[t(e(H),{value:r.department,"onUpdate:value":a[5]||(a[5]=i=>r.department=i),options:b,placeholder:"Выберите отдел"},null,8,["value"])]),_:1}),t(e(_),{label:"Роль",path:"role",required:""},{default:l(()=>[t(e(H),{value:r.role,"onUpdate:value":a[6]||(a[6]=i=>r.role=i),options:R,placeholder:"Выберите роль"},null,8,["value"])]),_:1}),t(e(_),{label:"Статус",path:"status",required:""},{default:l(()=>[t(e(H),{value:r.status,"onUpdate:value":a[7]||(a[7]=i=>r.status=i),options:j,placeholder:"Выберите статус"},null,8,["value"])]),_:1})]),_:1}),t(e(D),null,{default:l(()=>[t(e(Y),null,{default:l(()=>[...a[16]||(a[16]=[u("Финансы",-1)])]),_:1}),t(e(_),{label:"Зарплата",path:"salary",required:""},{default:l(()=>[t(e(ye),{value:r.salary,"onUpdate:value":a[8]||(a[8]=i=>r.salary=i),min:0,precision:0,placeholder:"Введите зарплату",style:{width:"100%"}},{suffix:l(()=>[...a[17]||(a[17]=[u("₽/мес",-1)])]),_:1},8,["value"])]),_:1}),t(e(_),{label:"Дата приема",path:"hireDate",required:""},{default:l(()=>[t(e(le),{value:r.hireDate,"onUpdate:value":a[9]||(a[9]=i=>r.hireDate=i),type:"date",placeholder:"Выберите дату приема",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(e(D),null,{default:l(()=>[t(e(Y),null,{default:l(()=>[...a[18]||(a[18]=[u("Дополнительно",-1)])]),_:1}),t(e(_),{label:"Адрес",path:"address"},{default:l(()=>[t(e(B),{value:r.address,"onUpdate:value":a[10]||(a[10]=i=>r.address=i),placeholder:"Адрес проживания"},null,8,["value"])]),_:1}),t(e(_),{label:"Навыки",path:"skills"},{default:l(()=>[t(e(ge),{value:r.skills,"onUpdate:value":a[11]||(a[11]=i=>r.skills=i)},null,8,["value"])]),_:1}),t(e(_),{label:"Примечания",path:"notes"},{default:l(()=>[t(e(B),{value:r.notes,"onUpdate:value":a[12]||(a[12]=i=>r.notes=i),type:"textarea",rows:2,placeholder:"Дополнительная информация"},null,8,["value"])]),_:1})]),_:1})]),_:1}),m("div",Ge,[t(e($),{onClick:a[13]||(a[13]=i=>S.$emit("cancel"))},{default:l(()=>[...a[19]||(a[19]=[u("Отмена",-1)])]),_:1}),t(e($),{type:"primary",onClick:P,loading:O.value},{default:l(()=>[...a[20]||(a[20]=[u(" Сохранить ",-1)])]),_:1},8,["loading"])])]),_:1},8,["model"]))}}),Je={key:0,class:"employee-details"},Ke={class:"mb-6"},Ye={class:"flex items-start gap-4"},Ze={class:"flex-grow"},We={class:"flex items-center gap-3 mt-2"},Xe={class:"text-gray-500"},et={class:"flex flex-wrap gap-2"},tt={key:1,class:"text-center py-8"},lt=V({__name:"EmployeeDetails",props:{employee:{}},setup(s){const f=a=>new Intl.DateTimeFormat("ru-RU").format(a),w=a=>new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(a),N=a=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(a),O=a=>({admin:"Администратор",manager:"Менеджер",worker:"Рабочий",warehouse:"Кладовщик",production:"Производство"})[a]||a,r=a=>({admin:"error",manager:"warning",worker:"info",warehouse:"success",production:"default"})[a]||"default",b=a=>({active:"Активен",inactive:"Неактивен",vacation:"Отпуск",sick:"Больничный"})[a]||a,R=a=>({active:"success",inactive:"default",vacation:"warning",sick:"error"})[a]||"default",j=()=>{window.$message?.info("Отправка сообщения сотруднику")},F=()=>{window.$message?.info("Редактирование сотрудника")},P=()=>{window.$message?.info("Просмотр документов сотрудника")},S=()=>{window.$dialog&&window.$dialog.warning({title:"Увольнение сотрудника",content:"Вы уверены, что хотите уволить этого сотрудника?",positiveText:"Уволить",negativeText:"Отмена",onPositiveClick:()=>{window.$message?.success("Сотрудник уволен")}})};return(a,i)=>s.employee?(k(),L("div",Je,[m("div",Ke,[m("div",Ye,[t(e(oe),{round:"",size:80,src:s.employee.avatar,class:"flex-shrink-0"},{default:l(()=>[u(g(s.employee.name.charAt(0)),1)]),_:1},8,["src"]),m("div",Ze,[t(e(be),{class:"m-0"},{default:l(()=>[u(g(s.employee.name),1)]),_:1}),m("div",We,[t(e(A),{type:r(s.employee.role),size:"small"},{default:l(()=>[u(g(O(s.employee.role)),1)]),_:1},8,["type"]),t(e(A),{type:R(s.employee.status),size:"small"},{default:l(()=>[u(g(b(s.employee.status)),1)]),_:1},8,["type"]),m("span",Xe,g(s.employee.position),1)])])])]),t(e(Z),{cols:2,"x-gap":16,"y-gap":16},{default:l(()=>[t(e(D),null,{default:l(()=>[t(e(E),{title:"Контактная информация"},{default:l(()=>[t(e(X),null,{default:l(()=>[t(e(M),null,{prefix:l(()=>[t(e(y),null,{default:l(()=>[t(e(se))]),_:1})]),default:l(()=>[t(e(h),null,{default:l(()=>[u(g(s.employee.email),1)]),_:1})]),_:1}),t(e(M),null,{prefix:l(()=>[t(e(y),null,{default:l(()=>[t(e(ie))]),_:1})]),default:l(()=>[t(e(h),null,{default:l(()=>[u(g(s.employee.phone),1)]),_:1})]),_:1}),s.employee.address?(k(),U(e(M),{key:0},{prefix:l(()=>[t(e(y),null,{default:l(()=>[t(e(Me))]),_:1})]),default:l(()=>[t(e(h),null,{default:l(()=>[u(g(s.employee.address),1)]),_:1})]),_:1})):Q("",!0),t(e(M),null,{prefix:l(()=>[t(e(y),null,{default:l(()=>[t(e(ke))]),_:1})]),default:l(()=>[t(e(h),null,{default:l(()=>[u(g(s.employee.birthDate?f(s.employee.birthDate):"Не указано"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(e(D),null,{default:l(()=>[t(e(E),{title:"Рабочая информация"},{default:l(()=>[t(e(X),null,{default:l(()=>[t(e(M),null,{prefix:l(()=>[t(e(y),null,{default:l(()=>[t(e(re))]),_:1})]),default:l(()=>[t(e(h),null,{default:l(()=>[u(g(s.employee.department),1)]),_:1})]),_:1}),t(e(M),null,{prefix:l(()=>[t(e(y),null,{default:l(()=>[t(e(Le))]),_:1})]),default:l(()=>[t(e(h),null,{default:l(()=>[u("Принят: "+g(f(s.employee.hireDate)),1)]),_:1})]),_:1}),t(e(M),null,{prefix:l(()=>[t(e(y),null,{default:l(()=>[t(e(ue))]),_:1})]),default:l(()=>[t(e(h),null,{default:l(()=>[u(g(N(s.employee.salary))+" / мес",1)]),_:1})]),_:1}),s.employee.lastLogin?(k(),U(e(M),{key:0},{prefix:l(()=>[t(e(y),null,{default:l(()=>[t(e(Be))]),_:1})]),default:l(()=>[t(e(h),null,{default:l(()=>[u("Последний вход: "+g(w(s.employee.lastLogin)),1)]),_:1})]),_:1})):Q("",!0)]),_:1})]),_:1})]),_:1}),t(e(D),{span:2},{default:l(()=>[t(e(E),{title:"Навыки"},{default:l(()=>[m("div",et,[(k(!0),L(ee,null,te(s.employee.skills,d=>(k(),U(e(A),{key:d,type:"info",round:""},{default:l(()=>[u(g(d),1)]),_:2},1024))),128)),s.employee.skills.length===0?(k(),U(e(A),{key:0,type:"default"},{default:l(()=>[...i[0]||(i[0]=[u(" Навыки не указаны ",-1)])]),_:1})):Q("",!0)])]),_:1})]),_:1}),s.employee.notes?(k(),U(e(D),{key:0,span:2},{default:l(()=>[t(e(E),{title:"Примечания"},{default:l(()=>[t(e(h),null,{default:l(()=>[u(g(s.employee.notes),1)]),_:1})]),_:1})]),_:1})):Q("",!0),t(e(D),{span:2},{default:l(()=>[t(e(E),{title:"Действия"},{default:l(()=>[t(e(he),null,{default:l(()=>[t(e($),{type:"primary",onClick:j},{icon:l(()=>[t(e(y),null,{default:l(()=>[t(e(je))]),_:1})]),default:l(()=>[i[1]||(i[1]=u(" Написать сообщение ",-1))]),_:1}),t(e($),{type:"warning",onClick:F},{icon:l(()=>[t(e(y),null,{default:l(()=>[t(e(de))]),_:1})]),default:l(()=>[i[2]||(i[2]=u(" Редактировать ",-1))]),_:1}),t(e($),{type:"info",onClick:P},{icon:l(()=>[t(e(y),null,{default:l(()=>[t(e(De))]),_:1})]),default:l(()=>[i[3]||(i[3]=u(" Документы ",-1))]),_:1}),t(e($),{type:"error",onClick:S},{icon:l(()=>[t(e(y),null,{default:l(()=>[t(e(xe))]),_:1})]),default:l(()=>[i[4]||(i[4]=u(" Уволить ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])):(k(),L("div",tt,[t(e(h),{depth:"3"},{default:l(()=>[...i[5]||(i[5]=[u("Сотрудник не найден",-1)])]),_:1})]))}}),at=me(lt,[["__scopeId","data-v-5716d4a2"]]),nt={class:"employees-page"},ot={class:"flex justify-between items-center mb-6"},st={class:"flex gap-3"},it={class:"flex justify-between items-center"},rt={class:"flex justify-between items-center"},ut={class:"flex justify-between items-center"},dt={class:"flex justify-between items-center"},mt={class:"flex flex-wrap gap-4"},pt={class:"flex justify-between items-center"},ft={class:"h-40 flex items-center justify-center"},ct={class:"text-center"},vt=V({__name:"Employees",setup(s){const f=Ve(),w=z(!1),N=z(!1),O=z(null),r=z(""),b=ne({department:null,status:null,role:null}),R=I(()=>f.departments.map(n=>({label:n.name,value:n.name}))),j=[{label:"Активен",value:"active"},{label:"Неактивен",value:"inactive"},{label:"Отпуск",value:"vacation"},{label:"Больничный",value:"sick"}],F=[{label:"Администратор",value:"admin"},{label:"Менеджер",value:"manager"},{label:"Рабочий",value:"worker"},{label:"Кладовщик",value:"warehouse"},{label:"Производство",value:"production"}],P={pageSize:10},S=I(()=>{let n=f.employees;if(r.value){const o=r.value.toLowerCase();n=n.filter(x=>x.name.toLowerCase().includes(o)||x.email.toLowerCase().includes(o)||x.phone.includes(o)||x.position.toLowerCase().includes(o))}return b.department&&(n=n.filter(o=>o.department===b.department)),b.status&&(n=n.filter(o=>o.status===b.status)),b.role&&(n=n.filter(o=>o.role===b.role)),n}),a=I(()=>{const n=[{type:"active",label:"Активен",count:0},{type:"inactive",label:"Неактивен",count:0},{type:"vacation",label:"Отпуск",count:0},{type:"sick",label:"Больничный",count:0}];return f.employees.forEach(o=>{const x=n.find(v=>v.type===o.status);x&&x.count++}),n}),i=[{title:"Сотрудник",key:"name",width:250,render:n=>p("div",{class:"flex items-center gap-3"},[p(oe,{round:!0,size:"small",src:n.avatar},()=>n.name.charAt(0)),p("div",[p("div",{class:"font-medium"},n.name),p("div",{class:"text-xs text-gray-500"},n.position)])])},{title:"Отдел",key:"department",width:120,sorter:(n,o)=>n.department.localeCompare(o.department)},{title:"Контакт",key:"contact",width:180,render:n=>p("div",[p("div",{class:"flex items-center gap-1 text-sm"},[p(y,{size:"14"},()=>p(se)),p("span",n.email)]),p("div",{class:"flex items-center gap-1 text-sm"},[p(y,{size:"14"},()=>p(ie)),p("span",n.phone)])])},{title:"Статус",key:"status",width:120,render:n=>{const o=n.lastLogin&&Date.now()-n.lastLogin.getTime()<3e5;return p("div",{class:"flex items-center gap-2"},[p(A,{type:f.getStatusColor(n.status),size:"small"},{default:()=>f.getStatusLabel(n.status)}),o&&p(Ne,{dot:!0,type:"success"})])}},{title:"Зарплата",key:"salary",width:120,render:n=>c(n.salary),sorter:(n,o)=>n.salary-o.salary},{title:"Дата приема",key:"hireDate",width:120,render:n=>d(n.hireDate),sorter:(n,o)=>n.hireDate.getTime()-o.hireDate.getTime()},{title:"Действия",key:"actions",width:150,render:n=>p("div",{class:"flex gap-2"},[p(W,null,{trigger:()=>p($,{size:"small",type:"info",quaternary:!0,onClick:()=>q(n.id)},{icon:()=>p(y,null,{default:()=>p(ze)})}),default:()=>"Просмотр"}),p(W,null,{trigger:()=>p($,{size:"small",type:"warning",quaternary:!0,onClick:()=>J(n.id)},{icon:()=>p(y,null,{default:()=>p(de)})}),default:()=>"Редактировать"}),p(W,null,{trigger:()=>p($,{size:"small",type:"error",quaternary:!0,onClick:()=>K(n.id)},{icon:()=>p(y,null,{default:()=>p(qe)})}),default:()=>"Удалить"})])}],d=n=>new Intl.DateTimeFormat("ru-RU").format(n),c=n=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0}).format(n),C=n=>({active:"green-500",inactive:"gray-500",vacation:"yellow-500",sick:"red-500"})[n]||"gray-500",T=()=>{r.value="",b.department=null,b.status=null,b.role=null},q=n=>{O.value=f.getEmployeeById(n),N.value=!0},J=n=>{window.$message?.info("Редактирование сотрудника")},K=n=>{window.$dialog&&window.$dialog.warning({title:"Удаление сотрудника",content:"Вы уверены, что хотите удалить этого сотрудника?",positiveText:"Удалить",negativeText:"Отмена",onPositiveClick:()=>{f.deleteEmployee(n),window.$message?.success("Сотрудник удален")}})},G=n=>{const o=f.departments.find(x=>x.id===n);o&&window.$message?.info(`Просмотр отдела: ${o.name}`)},pe=()=>{window.$message?.success("Данные экспортированы")},fe=n=>{f.addEmployee(n),w.value=!1,window.$message?.success("Сотрудник успешно добавлен")},ce=n=>{console.log("Сортировка:",n)};return(n,o)=>{const x=_e("n-h3");return k(),L("div",nt,[m("div",ot,[m("div",null,[t(e(Ce),null,{default:l(()=>[...o[8]||(o[8]=[u("Сотрудники",-1)])]),_:1}),t(e(h),{depth:"3"},{default:l(()=>[...o[9]||(o[9]=[u("Управление персоналом предприятия",-1)])]),_:1})]),m("div",st,[t(e($),{onClick:pe},{icon:l(()=>[t(e(y),null,{default:l(()=>[t(e(Se))]),_:1})]),default:l(()=>[o[10]||(o[10]=u(" Экспорт ",-1))]),_:1}),t(e($),{type:"primary",onClick:o[0]||(o[0]=v=>w.value=!0)},{icon:l(()=>[t(e(y),null,{default:l(()=>[t(e(He))]),_:1})]),default:l(()=>[o[11]||(o[11]=u(" Добавить сотрудника ",-1))]),_:1})])]),t(e(Z),{cols:4,"x-gap":16,"y-gap":16,class:"mb-6"},{default:l(()=>[t(e(D),null,{default:l(()=>[t(e(E),null,{default:l(()=>[m("div",it,[m("div",null,[t(e(h),{depth:"3"},{default:l(()=>[...o[12]||(o[12]=[u("Всего сотрудников",-1)])]),_:1}),t(x,{class:"m-0"},{default:l(()=>[u(g(e(f).totalEmployees),1)]),_:1})]),t(e(y),{size:"32",color:"#2080f0"},{default:l(()=>[t(e(Ee))]),_:1})])]),_:1})]),_:1}),t(e(D),null,{default:l(()=>[t(e(E),null,{default:l(()=>[m("div",rt,[m("div",null,[t(e(h),{depth:"3"},{default:l(()=>[...o[13]||(o[13]=[u("Активных",-1)])]),_:1}),t(x,{class:"m-0"},{default:l(()=>[u(g(e(f).activeEmployees),1)]),_:1})]),t(e(y),{size:"32",color:"#18a058"},{default:l(()=>[t(e(Ie))]),_:1})])]),_:1})]),_:1}),t(e(D),null,{default:l(()=>[t(e(E),null,{default:l(()=>[m("div",ut,[m("div",null,[t(e(h),{depth:"3"},{default:l(()=>[...o[14]||(o[14]=[u("ФОТ в месяц",-1)])]),_:1}),t(x,{class:"m-0"},{default:l(()=>[u(g(c(e(f).totalSalary)),1)]),_:1})]),t(e(y),{size:"32",color:"#d03050"},{default:l(()=>[t(e(ue))]),_:1})])]),_:1})]),_:1}),t(e(D),null,{default:l(()=>[t(e(E),null,{default:l(()=>[m("div",dt,[m("div",null,[t(e(h),{depth:"3"},{default:l(()=>[...o[15]||(o[15]=[u("Отделов",-1)])]),_:1}),t(x,{class:"m-0"},{default:l(()=>[u(g(e(f).departments.length),1)]),_:1})]),t(e(y),{size:"32",color:"#f0a020"},{default:l(()=>[t(e(re))]),_:1})])]),_:1})]),_:1})]),_:1}),t(e(E),{class:"mb-6"},{default:l(()=>[m("div",mt,[t(e(H),{value:b.department,"onUpdate:value":o[1]||(o[1]=v=>b.department=v),placeholder:"Отдел",options:R.value,clearable:"",style:{width:"200px"}},null,8,["value","options"]),t(e(H),{value:b.status,"onUpdate:value":o[2]||(o[2]=v=>b.status=v),placeholder:"Статус",options:j,clearable:"",style:{width:"200px"}},null,8,["value"]),t(e(H),{value:b.role,"onUpdate:value":o[3]||(o[3]=v=>b.role=v),placeholder:"Должность",options:F,clearable:"",style:{width:"200px"}},null,8,["value"]),t(e(B),{value:r.value,"onUpdate:value":o[4]||(o[4]=v=>r.value=v),placeholder:"Поиск по имени, email или телефону",clearable:"",style:{width:"300px"}},{prefix:l(()=>[t(e(y),null,{default:l(()=>[t(e(Ue))]),_:1})]),_:1},8,["value"]),t(e($),{onClick:T},{default:l(()=>[...o[16]||(o[16]=[u("Сбросить",-1)])]),_:1})])]),_:1}),t(e(Z),{cols:3,"x-gap":16,"y-gap":16},{default:l(()=>[t(e(D),{span:2},{default:l(()=>[t(e(E),{title:"Список сотрудников"},{default:l(()=>[t(e($e),{columns:i,data:S.value,pagination:P,"row-key":v=>v.id,striped:"","onUpdate:sorter":ce},null,8,["data","row-key"])]),_:1})]),_:1}),t(e(D),null,{default:l(()=>[t(e(E),{title:"Отделы"},{default:l(()=>[t(e(X),null,{default:l(()=>[(k(!0),L(ee,null,te(e(f).departments,v=>(k(),U(e(M),{key:v.id},{default:l(()=>[t(e(Oe),{title:v.name},{description:l(()=>[m("div",pt,[m("span",null,g(v.employeeCount)+" сотрудников",1),t(e(A),{size:"small",type:"info"},{default:l(()=>[u(g(c(v.budget))+"/год ",1)]),_:2},1024)])]),"header-extra":l(()=>[t(e($),{size:"tiny",quaternary:"",onClick:yt=>G(v.id)},{default:l(()=>[t(e(y),null,{default:l(()=>[t(e(Pe))]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1})]),_:1}),t(e(E),{title:"Статусы сотрудников",class:"mt-4"},{default:l(()=>[m("div",ft,[m("div",ct,[(k(!0),L(ee,null,te(a.value,v=>(k(),L("div",{key:v.type,class:"flex items-center gap-2 mb-2"},[m("div",{class:Te(`w-3 h-3 rounded-full bg-${C(v.type)}`)},null,2),m("span",null,g(v.label)+": "+g(v.count),1)]))),128))])])]),_:1})]),_:1})]),_:1}),t(e(ae),{show:w.value,"onUpdate:show":o[6]||(o[6]=v=>w.value=v),preset:"card",title:"Добавить сотрудника",style:{width:"600px"}},{default:l(()=>[t(Qe,{onSubmit:fe,onCancel:o[5]||(o[5]=v=>w.value=!1)})]),_:1},8,["show"]),t(e(ae),{show:N.value,"onUpdate:show":o[7]||(o[7]=v=>N.value=v),preset:"card",title:"Карточка сотрудника",style:{width:"800px"}},{default:l(()=>[O.value?(k(),U(at,{key:0,employee:O.value},null,8,["employee"])):Q("",!0)]),_:1},8,["show"])])}}}),_t=me(vt,[["__scopeId","data-v-062f7244"]]);export{_t as default};
